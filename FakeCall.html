<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Phone Call Mockup</title>
<style>
body, html {
  margin:0; padding:0;
  font-family: Arial, sans-serif;
  background:#f0f0f0;
  height:100%;
}

/* Home interface */
#interface {
  display:flex; flex-direction:column; gap:15px;
  background:#fff; padding:20px; border-radius:10px;
  width:90%; max-width:350px; margin:auto; margin-top:50px;
}
#interface input, #interface select, #interface button {
  padding:10px; font-size:16px; border-radius:5px; border:1px solid #ccc; width:100%; box-sizing:border-box;
}
button{cursor:pointer;}
button.primary{background:#007bff;color:#fff;border:none;}
button.primary:hover{background:#0056b3;}
button.red{background:red;color:#fff;border:none;}
button.red:hover{background:#aa0000;}
button.secondary{background:#555;color:#fff;border:none;}
button.secondary:hover{background:#333;}

/* Call screen overlay */
#callScreen {
  position: fixed;       /* sits on top */
  top:0; left:0;
  width:100%; height:100%;
  background:#000; color:#fff;
  padding:20px;
  text-align:center;
  overflow-y:auto;

  display:none;          /* hidden by default */
  flex-direction:column;
  justify-content:center;
  align-items:center;
  z-index:1000;          /* ensure above home screen */
}
#avatarImg {
  width:120px;
  height:120px;
  border-radius:50%;
  object-fit:cover;
  margin-bottom:20px;
}
#callScreen h1{font-size:2em;margin:10px 0; word-break: break-word;}
#callScreen p{font-size:1.2em;margin:10px 0;}
#callTimer{font-size:1.2em;margin-top:10px;}

/* Two rows for call buttons */
#callControlsTop {
  display:flex; gap:15px; justify-content:center; margin-top:20px; flex-wrap:wrap;
}
#callControlsTop button{flex:1; min-width:120px; max-width:150px; padding:15px 0; font-size:16px; border-radius:50px;}
#callControlsBottom{margin-top:20px;}
#callControlsBottom button{padding:20px 40px; font-size:20px; border-radius:50px; min-width:160px;}
</style>
</head>
<body>

<!-- Home screen -->
<div id="interface">
  <input type="text" id="contactName" placeholder="Enter Contact Name">
  <select id="callType">
    <option value="incoming">Incoming Call</option>
    <option value="outgoing">Outgoing Call</option>
  </select>
  <input type="file" id="avatarInput" accept="image/*">
  <button class="primary" id="playCall">Play Call</button>
</div>

<!-- Call screen overlay -->
<div id="callScreen">
  <img id="avatarImg" style="display:none;" alt="Contact Avatar">
  <h1 id="contactDisplay"></h1>
  <p id="statusText">Calling...</p>
  <div id="callTimer">00:00</div>
  <div id="callControlsTop"></div>
  <div id="callControlsBottom"></div>
</div>

<script>
const interfaceDiv = document.getElementById('interface');
const playBtn = document.getElementById('playCall');
const callScreen = document.getElementById('callScreen');
const contactDisplay = document.getElementById('contactDisplay');
const statusText = document.getElementById('statusText');
const callTimerEl = document.getElementById('callTimer');
const callControlsTop = document.getElementById('callControlsTop');
const callControlsBottom = document.getElementById('callControlsBottom');
const avatarInput = document.getElementById('avatarInput');
const avatarImg = document.getElementById('avatarImg');

let timerInterval = null;
let seconds = 0;

function formatTime(sec){
  const m = Math.floor(sec/60).toString().padStart(2,'0');
  const s = (sec%60).toString().padStart(2,'0');
  return `${m}:${s}`;
}

function startTimer(){
  clearInterval(timerInterval);
  timerInterval = setInterval(()=>{
    seconds++;
    callTimerEl.textContent = formatTime(seconds);
  },1000);
}

function resetCall(){
  clearInterval(timerInterval);
  callScreen.style.display='none';
  callControlsTop.innerHTML='';
  callControlsBottom.innerHTML='';
  avatarImg.style.display='none';
  avatarImg.src = '';
  seconds=0;
  callTimerEl.textContent="00:00";
  statusText.textContent="Calling...";
  interfaceDiv.style.display='flex';
}

function addCallControls(){
  // Top row: Speaker and Mute
  const speakerBtn = document.createElement('button');
  speakerBtn.className='secondary';
  speakerBtn.textContent='Speaker';
  speakerBtn.onclick = ()=>alert("Speaker toggled (mockup)");

  const muteBtn = document.createElement('button');
  muteBtn.className='secondary';
  muteBtn.textContent='Mute';
  muteBtn.onclick = ()=>alert("Mute toggled (mockup)");

  callControlsTop.appendChild(speakerBtn);
  callControlsTop.appendChild(muteBtn);

  // Bottom row: End Call
  const endBtn = document.createElement('button');
  endBtn.className='red';
  endBtn.textContent='End Call';
  endBtn.onclick = resetCall;
  callControlsBottom.appendChild(endBtn);
}

playBtn.addEventListener('click',()=>{
  const name = document.getElementById('contactName').value.trim()||"Unknown";
  const type = document.getElementById('callType').value;

  contactDisplay.textContent = name;
  statusText.textContent="Calling...";
  callControlsTop.innerHTML='';
  callControlsBottom.innerHTML='';

  // Handle avatar if selected
  const file = avatarInput.files[0];
  if(file){
    const reader = new FileReader();
    reader.onload = e => {
      avatarImg.src = e.target.result;
      avatarImg.style.display = 'block';
    };
    reader.readAsDataURL(file);
  } else {
    avatarImg.style.display='none';
    avatarImg.src='';
  }

  // Show call screen overlay on top
  callScreen.style.display='flex';

  if(type==="incoming"){
    // Incoming call: Accept / Refuse
    const acceptBtn = document.createElement('button');
    acceptBtn.className='primary';
    acceptBtn.textContent='Accept';
    acceptBtn.onclick = () => {
      statusText.textContent="In Call";
      startTimer();
      callControlsTop.innerHTML='';
      callControlsBottom.innerHTML='';
      addCallControls();
    };
    const refuseBtn = document.createElement('button');
    refuseBtn.className='red';
    refuseBtn.textContent='Refuse';
    refuseBtn.onclick = resetCall;
    callControlsTop.appendChild(acceptBtn);
    callControlsTop.appendChild(refuseBtn);
  } else {
    // Outgoing call: Cancel button only
    const cancelBtn = document.createElement('button');
    cancelBtn.className='red';
    cancelBtn.textContent='Cancel';
    cancelBtn.onclick = resetCall;
    callControlsBottom.appendChild(cancelBtn);
  }
});
</script>

</body>
</html>
